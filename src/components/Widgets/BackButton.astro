---
import GoBackIcon from '@/assets/icons/go-back.svg'

const { class: className } = Astro.props
---

<button
  id="back-button"
  class:list={[
    'group flex items-center justify-center rounded-lg p-2 transition-all duration-300 hover:bg-slate-100 dark:hover:bg-slate-800',
    className,
  ]}
  aria-label="Go back"
>
  <GoBackIcon
    class="h-5 w-5 c-secondary/40 transition-colors group-hover:c-secondary/80"
    aria-hidden="true"
    fill="currentColor"
  />
</button>

<!-- Go Back Script >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> -->
<script>
function handleBackButtonClick(e: MouseEvent) {
  const target = e.target instanceof Element ? e.target : null
  const button = target?.closest('#back-button')

  if (!button) {
    return
  }

  // Always navigate to homepage to avoid just reverting internal state changes (anchors, etc.)
  const siteTitleLink = document.getElementById('site-title-link')
  if (siteTitleLink) {
    siteTitleLink.click()
  }
  else {
    window.location.href = '/'
  }
}

document.addEventListener('click', handleBackButtonClick, { passive: true })
</script>
