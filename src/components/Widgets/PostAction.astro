---
---

<div
  id="post-action-sidebar"
  class="fixed left-[calc(50vw-38.5rem)] top-1/2 z-10 hidden flex-col gap-4 xl:flex -translate-y-1/2"
>
  <!-- Share Button -->
  <button
    id="action-share"
    class="action-btn group"
    aria-label="Share this post"
  >
    <div class="icon-container">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="icon-original h-5 w-5"
      >
        <circle cx="18" cy="5" r="3" />
        <circle cx="6" cy="12" r="3" />
        <circle cx="18" cy="19" r="3" />
        <line x1="8.59" y1="13.51" x2="15.42" y2="17.49" />
        <line x1="15.41" y1="6.51" x2="8.59" y2="10.49" />
      </svg>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="icon-success h-5 w-5"
      >
        <polyline points="20 6 9 17 4 12" />
      </svg>
    </div>
    <span class="tooltip">Share</span>
  </button>

  <!-- Tags Button -->
  <button
    id="action-tags"
    class="action-btn group"
    aria-label="Jump to tags"
  >
    <div class="icon-container">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="icon-original h-5 w-5"
      >
        <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" />
        <line x1="7" y1="7" x2="7.01" y2="7" />
      </svg>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="icon-success h-5 w-5"
      >
        <polyline points="20 6 9 17 4 12" />
      </svg>
    </div>
    <span class="tooltip">Tags</span>
  </button>

  <!-- Comment Button -->
  <button
    id="action-comment"
    class="action-btn group"
    aria-label="Jump to comments"
  >
    <div class="icon-container">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="icon-original h-5 w-5"
      >
        <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z" />
      </svg>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="icon-success h-5 w-5"
      >
        <polyline points="20 6 9 17 4 12" />
      </svg>
    </div>
    <span class="tooltip">Comment</span>
  </button>

  <!-- Back to Top Button -->
  <button
    id="action-top"
    class="action-btn group"
    aria-label="Back to top"
  >
    <div class="icon-container">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="icon-original h-5 w-5"
      >
        <line x1="12" y1="19" x2="12" y2="5" />
        <polyline points="5 12 12 5 19 12" />
      </svg>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="icon-success h-5 w-5"
      >
        <polyline points="20 6 9 17 4 12" />
      </svg>
    </div>
    <span class="tooltip">Top</span>
  </button>
</div>

<style>
  .action-btn {
    --at-apply: 'flex items-center justify-center w-10 h-10 rounded-full bg-secondary/5 text-secondary/60 hover:bg-primary/10 hover:text-primary transition-all duration-300 relative';
  }

  .action-btn.success {
    --at-apply: 'text-primary bg-primary/10';
  }

  .icon-container {
    --at-apply: 'relative w-5 h-5';
  }

  .icon-original,
  .icon-success {
    --at-apply: 'absolute inset-0 transition-all duration-300 ease-in-out';
  }

  .icon-original {
    --at-apply: 'opacity-100 scale-100';
  }

  .icon-success {
    --at-apply: 'opacity-0 scale-50';
  }

  .action-btn.success .icon-original {
    --at-apply: 'opacity-0 scale-50';
  }

  .action-btn.success .icon-success {
    --at-apply: 'opacity-100 scale-100';
  }

  .tooltip {
    --at-apply: 'absolute left-full ml-2 px-2 py-1 bg-secondary/80 text-primary-content text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none';
  }
</style>

<script>
 function setupPostActions() {
   const showSuccess = (btn: HTMLElement) => {
     btn.classList.add('success')
     setTimeout(() => {
       btn.classList.remove('success')
     }, 2000)
   }

   // Share
   const shareBtn = document.getElementById('action-share')
   shareBtn?.addEventListener('click', async () => {
     try {
       await navigator.clipboard.writeText(window.location.href)
       showSuccess(shareBtn)
     }
 catch (err) {
       console.error('Failed to copy:', err)
     }
   })

   // Tags
   const tagsBtn = document.getElementById('action-tags')
   tagsBtn?.addEventListener('click', () => {
     document.getElementById('post-tags')?.scrollIntoView({ behavior: 'smooth' })
     showSuccess(tagsBtn)
   })

   // Comment
   const commentBtn = document.getElementById('action-comment')
   commentBtn?.addEventListener('click', () => {
     document.getElementById('post-comment')?.scrollIntoView({ behavior: 'smooth' })
     showSuccess(commentBtn)
   })

   // Top
   const topBtn = document.getElementById('action-top')
   topBtn?.addEventListener('click', () => {
     window.scrollTo({ top: 0, behavior: 'smooth' })
     showSuccess(topBtn)
   })
 }

 document.addEventListener('astro:page-load', setupPostActions)
 setupPostActions()
</script>
